{
  "$schema": "https://atlashub.ch/schemas/claude-gitflow-config.json",
  "version": "1.2.0",
  "worktrees": {
    "enabled": true,
    "basePath": "../worktrees",
    "permanent": {
      "main": true,
      "develop": true
    },
    "structure": {
      "features": "features/{name}",
      "releases": "releases/v{version}",
      "hotfixes": "hotfixes/{name}"
    },
    "cleanupOnFinish": true
  },
  "git": {
    "branches": {
      "main": "main",
      "develop": "develop",
      "featurePrefix": "feature/",
      "releasePrefix": "release/",
      "hotfixPrefix": "hotfix/"
    },
    "remote": "origin",
    "mergeStrategy": "--no-ff",
    "tagPrefix": "v",
    "protectedBranches": ["main", "develop"],
    "requireLinearHistory": false
  },
  "efcore": {
    "enabled": true,
    "autoDetect": true,
    "crossBranch": {
      "enabled": true,
      "scanOnMigrationCreate": true,
      "blockOnConflict": true,
      "cacheExpiry": 300
    },
    "contexts": [
      {
        "name": "ApplicationDbContext",
        "projectPath": "auto-detect",
        "startupProject": "auto-detect",
        "migrationsFolder": "Migrations",
        "migrationsAssembly": null
      }
    ],
    "database": {
      "configFile": "appsettings.Local.json",
      "connectionStringName": "DefaultConnection",
      "provider": "SqlServer",
      "seedOnDeploy": false,
      "confirmBeforeReset": true,
      "backupBeforeReset": true
    },
    "scripts": {
      "generateOnRelease": true,
      "generateOnHotfix": true,
      "idempotent": true,
      "outputPath": "./scripts/migrations",
      "namingPattern": "{type}_{version}_{timestamp}.sql"
    },
    "validation": {
      "validateBeforeCommit": true,
      "validateBeforeMerge": true,
      "checkModelSnapshotConflicts": true,
      "crossBranchValidation": true,
      "requireBuildSuccess": true,
      "warnOnPendingMigrations": true
    },
    "backup": {
      "enabled": true,
      "beforeRebase": true,
      "beforeSquash": true,
      "beforeMerge": true,
      "retentionDays": 7,
      "location": ".claude/gitflow/backup/migrations"
    },
    "naming": {
      "migrationPrefix": "",
      "hotfixPrefix": "Hotfix_",
      "timestampFormat": "yyyyMMddHHmmss",
      "pattern": "{BranchType}_{Version}_{BranchName}_{Description}",
      "examples": {
        "feature": "Feature_1.2.0_UserAuth_AddRolesTable",
        "hotfix": "Hotfix_1.2.1_LoginFix_FixNullEmail",
        "release": "Release_1.3.0_Initial"
      }
    },
    "rules": {
      "oneMigrationPerFeature": true,
      "recreateOnChange": true,
      "requireDescription": true,
      "validateNaming": true
    }
  },
  "workflow": {
    "requireConfirmation": true,
    "autoDeleteBranch": false,
    "createCheckpoints": true,
    "verboseLogging": false,
    "interactiveMode": true,
    "push": {
      "afterCommit": "worktree",
      "modes": {
        "worktree": "Push automatique si worktree détecté",
        "always": "Push automatique après chaque commit",
        "ask": "Demander à l'utilisateur",
        "never": "Ne jamais push automatiquement"
      }
    },
    "commitConventions": {
      "enabled": true,
      "migration": "db(migrations): ",
      "feature": "feat: ",
      "fix": "fix: ",
      "release": "release: ",
      "hotfix": "hotfix: ",
      "chore": "chore: "
    },
    "hooks": {
      "prePlan": null,
      "postPlan": null,
      "preExec": null,
      "postExec": null,
      "preCommit": null,
      "postCommit": null
    }
  },
  "ui": {
    "colors": true,
    "showProgress": true,
    "compactMode": false,
    "language": "fr"
  }
}
