---
description: Phase 4 - Functional specifications FRD (ULTRATHINK)
---

# Business Analyse - Specify

Senior BA expert in specifications. ULTRATHINK mode mandatory.

## Arguments

```
/business-analyse:specify [feature-id]
```

- `feature-id`: Feature identifier (e.g., FEAT-001)

## Prerequisites

```bash
# Verify that BRD exists
test -f ".business-analyse/applications/*/modules/*/features/$ARGUMENTS/2-business-requirements.md" || \
  echo "Execute /business-analyse:analyse first"
```

## ULTRATHINK Mode

**IMPORTANT**: This phase requires ULTRATHINK behavioral mode for precise specifications.

ULTRATHINK is a **behavioral mode**, not a tool or skill to invoke. Claude activates extended thinking to:
- Consider all edge cases before specifying
- Challenge assumptions aggressively
- Generate comprehensive, unambiguous specifications
- Validate completeness before outputting

**Approach to adopt:**
- Specify with surgical precision
- No ambiguity tolerated
- Complete use cases
- Verifiable acceptance criteria

## Workflow

### Step 1: Load context

```bash
cat ".business-analyse/applications/*/modules/*/features/$FEATURE_ID/2-business-requirements.md"
cat .business-analyse/config.json
```

### Step 2: Detailed use cases

For each feature, create a complete use case:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USE CASE: UC-{{XXX}} - {{NAME}}                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Primary actor: {{ACTOR}}                                                â”‚
â”‚ Secondary actors: {{SECONDARY_ACTORS}}                                  â”‚
â”‚ Preconditions: {{PRECONDITIONS}}                                        â”‚
â”‚ Postconditions (success): {{SUCCESS_POSTCONDITIONS}}                    â”‚
â”‚ Postconditions (failure): {{FAILURE_POSTCONDITIONS}}                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MAIN SCENARIO (Happy Path)                                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚ 1. {{ACTOR}} {{ACTION_1}}                                               â”‚
â”‚ 2. The system {{REACTION_1}}                                            â”‚
â”‚ 3. {{ACTOR}} {{ACTION_2}}                                               â”‚
â”‚ 4. The system {{REACTION_2}}                                            â”‚
â”‚ 5. ...                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EXTENSIONS (Alternative flows)                                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚ 2a. If {{CONDITION}}:                                                   â”‚
â”‚     2a.1. The system {{ALTERNATIVE_ACTION}}                             â”‚
â”‚     2a.2. Return to step 3                                              â”‚
â”‚                                                                         â”‚
â”‚ 4a. If {{ERROR}}:                                                       â”‚
â”‚     4a.1. The system displays "{{ERROR_MESSAGE}}"                       â”‚
â”‚     4a.2. The use case ends                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ APPLICABLE BUSINESS RULES                                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚ â€¢ BR-001: {{RULE}}                                                      â”‚
â”‚ â€¢ BR-002: {{RULE}}                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 2bis: State Machine (if entity has status/state field)

For entities with lifecycle states, document the state machine:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STATE MACHINE: {{ENTITY}}.{{STATUS_FIELD}}                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ VISUAL FLOW:                                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚  [Draft] â”€â”€(publish)â”€â”€â–º [Published] â”€â”€(archive)â”€â”€â–º [Archived]           â”‚
â”‚     â”‚                        â”‚                          â”‚               â”‚
â”‚     â”‚                        â””â”€â”€â”€â”€(unpublish)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚     â”‚                                                   â”‚               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(delete)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TRANSITION RULES                                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚                                                                         â”‚
â”‚ | From      | To        | Action     | Conditions           | Roles    â”‚
â”‚ |-----------|-----------|------------|----------------------|----------|
â”‚ | Draft     | Published | publish    | All required fields  | Admin    â”‚
â”‚ | Published | Archived  | archive    | None                 | Admin    â”‚
â”‚ | Archived  | Published | unarchive  | None                 | Admin    â”‚
â”‚ | Draft     | (deleted) | delete     | No dependencies      | Admin    â”‚
â”‚ | Published | Draft     | âœ— ILLEGAL  | -                    | -        â”‚
â”‚ | Archived  | Draft     | âœ— ILLEGAL  | -                    | -        â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TRANSITION EFFECTS                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚                                                                         â”‚
â”‚ | Transition      | Side Effects                    | Notifications    â”‚
â”‚ |-----------------|--------------------------------|------------------|
â”‚ | â†’ Published     | Set publishedAt = now          | Email to owner   â”‚
â”‚ | â†’ Archived      | Hide from public listings      | None             â”‚
â”‚ | â†’ (deleted)     | Soft delete, set deletedAt     | Audit log only   â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UI REPRESENTATION                                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚ â€¢ Current state: Badge with color (Draft=gray, Published=green, etc.)   â”‚
â”‚ â€¢ Available actions: Buttons shown only for LEGAL transitions           â”‚
â”‚ â€¢ Illegal actions: Hidden (not disabled) to reduce confusion            â”‚
â”‚ â€¢ Confirmation: Required for destructive transitions (delete, archive)  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**State Machine Summary Table:**

| State | Entry Conditions | Exit Transitions | UI Badge Color |
|-------|------------------|------------------|----------------|
| Draft | Initial state | publish, delete | Gray |
| Published | All required fields | archive, unpublish | Green |
| Archived | From Published | unarchive | Orange |

### Step 3: Interface specifications (ASCII Wireframes)

For each screen, create an ASCII wireframe:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCREEN: {{SCREEN_NAME}}                                                 â”‚
â”‚ URL: {{URL_PATTERN}}                                                    â”‚
â”‚ Authorized roles: {{ROLES}}                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ {{APP_NAME}}                              [User â–¼] [Logout]     â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ [Menu1] [Menu2] [Menu3]                                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  {{PAGE_TITLE}}                           [+ New]               â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Search: [________________________] [ğŸ”]                  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Filters:   [Status â–¼] [Date â–¼]                          â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ â˜    â”‚ Name        â”‚ Status   â”‚ Date    â”‚ Actions     â”‚     â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚    â”‚
â”‚  â”‚  â”‚ â˜    â”‚ Item 1      â”‚ â— Active â”‚ 01/01   â”‚ [âœ] [ğŸ—‘]    â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â˜    â”‚ Item 2      â”‚ â—‹ Inactiveâ”‚ 02/01  â”‚ [âœ] [ğŸ—‘]    â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â”‚  [â—€ Previous]  Page 1 of 5  [Next â–¶]                           â”‚    â”‚
â”‚  â”‚                                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INTERACTIVE ELEMENTS                                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚ â€¢ [+ New]: Opens creation form (see screen FORM-001)                    â”‚
â”‚ â€¢ [âœ]: Opens edit form with pre-filled data                            â”‚
â”‚ â€¢ [ğŸ—‘]: Confirmation then deletion (soft delete if applicable)          â”‚
â”‚ â€¢ Search: Real-time filter on name                                      â”‚
â”‚ â€¢ Pagination: 20 items per page                                         â”‚
â”‚                                                                         â”‚
â”‚ FRONT-END VALIDATIONS                                                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚ â€¢ Minimum 1 item selected for bulk actions                              â”‚
â”‚ â€¢ Confirmation required before deletion                                 â”‚
â”‚                                                                         â”‚
â”‚ MESSAGES                                                                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚ â€¢ Creation success: "{{ENTITY}} created successfully"                   â”‚
â”‚ â€¢ Deletion success: "{{ENTITY}} deleted"                                â”‚
â”‚ â€¢ Error: "An error occurred. Please try again."                         â”‚
â”‚ â€¢ Empty: "No results found. Create your first {{ENTITY}}."              â”‚
â”‚                                                                         â”‚
â”‚ UI STATES (mandatory for each screen)                                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚ â€¢ Loading: Skeleton with 5 placeholder rows                             â”‚
â”‚ â€¢ Empty: Illustration + "No {{entity}} yet" + [+ Create first] CTA      â”‚
â”‚ â€¢ Error: âš ï¸ icon + "Failed to load" + [Retry] button                    â”‚
â”‚ â€¢ Disabled: Grayed out, cursor: not-allowed, tooltip explains why       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**UI States Table (mandatory per screen):**

| Screen | Loading State | Empty State | Error State | Disabled State |
|--------|---------------|-------------|-------------|----------------|
| List | Skeleton 5 rows | Illustration + CTA | Retry button | N/A |
| Form | Spinner on submit | N/A | Inline errors | Submit disabled if invalid |
| Detail | Skeleton | 404 page | Retry button | Edit disabled if no permission |

### Step 3a: Bulk Operations (for list pages)

For list pages with multiple items, document bulk operations:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BULK OPERATIONS - {{LIST_PAGE}}                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ SELECTION MECHANISM                                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚ â€¢ Per-row checkbox: Select individual items                             â”‚
â”‚ â€¢ Header checkbox: Toggle all on CURRENT PAGE                           â”‚
â”‚ â€¢ "Select all N items": Extends to ALL matching items (across pages)    â”‚
â”‚ â€¢ Selection counter: "X selected" visible in action bar                 â”‚
â”‚ â€¢ Selection persistence: Maintained across pagination                   â”‚
â”‚ â€¢ Clear selection: [x Clear] button or navigate away                    â”‚
â”‚                                                                         â”‚
â”‚ AVAILABLE ACTIONS                                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚                                                                         â”‚
â”‚ | Action       | Min | Max  | Confirmation | Roles  | API             â”‚
â”‚ |--------------|-----|------|--------------|--------|-----------------|
â”‚ | Delete       | 1   | 100  | Modal        | Admin  | DELETE /bulk    â”‚
â”‚ | Export CSV   | 1   | 1000 | None         | User   | POST /export    â”‚
â”‚ | Change status| 1   | 100  | Toast        | Admin  | PATCH /bulk     â”‚
â”‚ | Assign to    | 1   | 50   | Dropdown     | Admin  | PATCH /bulk     â”‚
â”‚ | Move to      | 1   | 50   | Dropdown     | Admin  | PATCH /bulk     â”‚
â”‚                                                                         â”‚
â”‚ UI FEEDBACK                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚ â€¢ Progress: "Processing X of Y..." + progress bar (for > 10 items)      â”‚
â”‚ â€¢ Partial failure: "3 succeeded, 2 failed" + [View details] link        â”‚
â”‚ â€¢ Success: Toast "X items updated"                                      â”‚
â”‚ â€¢ Action bar: Appears fixed at bottom when selection > 0                â”‚
â”‚                                                                         â”‚
â”‚ ACTION BAR LAYOUT                                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ â˜‘ 5 selected   [Delete] [Export] [Change status â–¼]   [x Clear]  â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Bulk Operations Summary Table:**

| Action | Confirmation | Progress | Partial Failure Handling |
|--------|--------------|----------|--------------------------|
| Delete | Modal required | If > 10 items | Show failed IDs, offer retry |
| Export | None | Always (download) | N/A |
| Status change | Toast | If > 10 items | List failed, keep selection |

### Step 3b: Search & Filter Patterns (for list pages)

Document search and filtering capabilities:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SEARCH & FILTER - {{LIST_PAGE}}                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ SEARCH TYPES                                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                         â”‚
â”‚ | Type        | Trigger       | Debounce | Fields Searched        |    â”‚
â”‚ |-------------|---------------|----------|------------------------|    â”‚
â”‚ | Quick       | onChange      | 300ms    | name, code             |    â”‚
â”‚ | Full-text   | onSubmit      | 0ms      | name, description, tags|    â”‚
â”‚ | Advanced    | Query builder | 0ms      | All filterable fields  |    â”‚
â”‚                                                                         â”‚
â”‚ Quick search placeholder: "Search by name or code..."                   â”‚
â”‚                                                                         â”‚
â”‚ FILTER TYPES                                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                         â”‚
â”‚ | Field     | Widget       | Multi | Default     | Clear          |    â”‚
â”‚ |-----------|--------------|-------|-------------|----------------|    â”‚
â”‚ | status    | Dropdown     | Yes   | All         | "All" option   |    â”‚
â”‚ | dateRange | DatePicker   | N/A   | Last 30d    | Clear (X)      |    â”‚
â”‚ | category  | Checkbox list| Yes   | All checked | Uncheck all    |    â”‚
â”‚ | owner     | Autocomplete | No    | None        | Clear (X)      |    â”‚
â”‚ | tags      | Tag input    | Yes   | None        | Remove all     |    â”‚
â”‚                                                                         â”‚
â”‚ FILTER LAYOUT                                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ Search: [_________________________] [ğŸ”]                         â”‚     â”‚
â”‚ â”‚ Filters: [Status â–¼] [Date â–¼] [Category â–¼] [+ More] [Clear all]  â”‚     â”‚
â”‚ â”‚                                                                  â”‚     â”‚
â”‚ â”‚ Active: [Status: Active Ã—] [Category: Sales Ã—]   2 filters       â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ URL PERSISTENCE                                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚ â€¢ All filters reflected in URL query params (shareable links)           â”‚
â”‚ â€¢ Example: /items?status=active&category=sales&page=2                   â”‚
â”‚ â€¢ Browser back/forward maintains filter state                           â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SAVED FILTERS (if applicable)                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚ â€¢ Save: [ğŸ’¾ Save current filters] â†’ Name prompt                         â”‚
â”‚ â€¢ Load: [ğŸ“ Saved â–¼] â†’ List of saved filters                            â”‚
â”‚ â€¢ Share: Generate URL with filters                                      â”‚
â”‚ â€¢ Notify: Toggle "Email me when new items match"                        â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EMPTY STATE AFTER FILTER                                                â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚ â€¢ Message: "No results match your filters"                              â”‚
â”‚ â€¢ Suggestions: "Try removing 'Status: Archived'"                        â”‚
â”‚ â€¢ Action: [Clear all filters] button prominently displayed              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Filter Summary Table:**

| Filter | Type | Multi-select | API Param | Default |
|--------|------|--------------|-----------|---------|
| {{FILTER}} | {{WIDGET}} | {{YES/NO}} | {{PARAM}} | {{DEFAULT}} |

### Step 3c: Pagination Strategy (for list pages)

Document pagination approach:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PAGINATION - {{LIST_PAGE}}                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ STRATEGY SELECTION                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚                                                                         â”‚
â”‚ | Strategy       | Best For           | Trade-offs                    â”‚
â”‚ |----------------|--------------------|------------------------------ â”‚
â”‚ | Offset (page)  | Small datasets     | Slow on large data, drift     â”‚
â”‚ | Cursor         | Large/real-time    | No random page access         â”‚
â”‚ | Infinite scroll| Mobile/feeds       | Hard to bookmark position     â”‚
â”‚ | Load more      | Append behavior    | Memory grows with scrolling   â”‚
â”‚                                                                         â”‚
â”‚ SELECTED: {{OFFSET|CURSOR|INFINITE|LOAD_MORE}}                          â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ OFFSET PAGINATION SPEC (if selected)                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚ â€¢ Page size: {{20}} items (configurable: 10, 20, 50, 100)               â”‚
â”‚ â€¢ Display: "Showing 21-40 of 156 items"                                 â”‚
â”‚ â€¢ Navigation: [â—€ Prev] [1] [2] [3] ... [8] [Next â–¶]                    â”‚
â”‚ â€¢ URL: ?page=2&limit=20                                                 â”‚
â”‚ â€¢ Edge: Page beyond range â†’ redirect to last page                       â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CURSOR PAGINATION SPEC (if selected)                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚ â€¢ Cursor field: {{createdAt}} + {{id}} (compound for stability)         â”‚
â”‚ â€¢ Direction: Next only (or bidirectional if needed)                     â”‚
â”‚ â€¢ Display: [Load more] button or infinite scroll                        â”‚
â”‚ â€¢ URL: ?cursor=eyJpZCI6MTIzfQ== (base64 encoded)                        â”‚
â”‚ â€¢ Edge: End of data â†’ hide "Load more" button                           â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INFINITE SCROLL SPEC (if selected)                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚ â€¢ Trigger: Scroll reaches 80% of container height                       â”‚
â”‚ â€¢ Loading: Skeleton rows appended at bottom                             â”‚
â”‚ â€¢ Back navigation: Restore scroll position from state                   â”‚
â”‚ â€¢ Performance: Virtualize if > 500 items visible                        â”‚
â”‚ â€¢ End: "You've reached the end" message                                 â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ COMMON REQUIREMENTS                                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚ â€¢ Maintain filters across pagination                                    â”‚
â”‚ â€¢ Show total count (if available)                                       â”‚
â”‚ â€¢ Loading state: Skeleton or spinner (never blank)                      â”‚
â”‚ â€¢ Empty page: "No more items" + option to go back                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pagination Configuration Table:**

| Aspect | Value | Rationale |
|--------|-------|-----------|
| Strategy | {{OFFSET/CURSOR}} | {{WHY}} |
| Default page size | {{20}} | Balances load time and usability |
| Max page size | {{100}} | Prevents performance issues |
| Cursor field | {{FIELD}} | Stable, indexed |

### Step 3bis: Navigation Matrix (Hierarchical Access)

For applications with hierarchical data structures (Master-Detail patterns), document the navigation matrix:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NAVIGATION MATRIX - Hierarchical Data Access                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ ENTRY POINT: {{MODULE_ROUTE}} (e.g., /domains)                          â”‚
â”‚                                                                         â”‚
â”‚ From: {{MASTER_ENTITY}} (e.g., Domain)                                  â”‚
â”‚ â”œâ”€â”€ Direct Access: {{CHILD_1}} (e.g., Users â†’ /domains/{id}/users)      â”‚
â”‚ â”œâ”€â”€ Direct Access: {{CHILD_2}} (e.g., Projects â†’ /domains/{id}/projects)â”‚
â”‚ â”œâ”€â”€ Direct Access: {{CHILD_3}} (e.g., Sources â†’ /domains/{id}/sources)  â”‚
â”‚ â””â”€â”€ Context preserved: Domain context visible in all child views        â”‚
â”‚                                                                         â”‚
â”‚ NAVIGATION PATTERN:                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚ â”‚  Module  â”‚â”€â”€â”€â–ºâ”‚ Master List  â”‚â”€â”€â”€â–ºâ”‚ Master Detail  â”‚                  â”‚
â”‚ â”‚  Route   â”‚    â”‚  (domains)   â”‚    â”‚  (domain/123)  â”‚                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                             â”‚                           â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                 â–¼                           â–¼                       â–¼   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚         â”‚ Child View 1 â”‚          â”‚ Child View 2 â”‚          â”‚ Child N  â”‚â”‚
â”‚         â”‚   (users)    â”‚          â”‚  (projects)  â”‚          â”‚ (sources)â”‚â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CONTEXT RULES                                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚ â€¢ Parent context always visible in breadcrumb                           â”‚
â”‚ â€¢ Child operations scoped to parent (no orphan creation)                â”‚
â”‚ â€¢ Cross-reference links to related entities                             â”‚
â”‚ â€¢ Back navigation preserves filter state                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Navigation Matrix Table:**

| From Entity | To Entity | Route Pattern | Relationship | Context Preserved |
|-------------|-----------|---------------|--------------|-------------------|
| {{MASTER}} | {{CHILD_1}} | /{{master}}/{id}/{{child1}} | 1:N | Master ID, Name |
| {{MASTER}} | {{CHILD_2}} | /{{master}}/{id}/{{child2}} | 1:N | Master ID, Name |
| {{CHILD_1}} | {{GRANDCHILD}} | /{{child1}}/{id}/{{grandchild}} | 1:N | Child + Master context |

### Step 3ter: Data Access Patterns

Document how users access related data from a given context:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATA ACCESS PATTERNS - Cross-Entity Navigation                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ SCENARIO: User is on {{MASTER_DETAIL}} page                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                         â”‚
â”‚ ACCESSIBLE DATA:                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Current Entity: {{MASTER}}                                        â”‚   â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚   â”‚
â”‚ â”‚ â€¢ All {{MASTER}} attributes displayed                             â”‚   â”‚
â”‚ â”‚ â€¢ Edit/Delete actions available (based on permissions)            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Related Entities (tabs or sections):                              â”‚   â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚   â”‚
â”‚ â”‚ [TAB 1: {{CHILD_1}}]   Count: {{N}} | Quick actions: View, Add    â”‚   â”‚
â”‚ â”‚ [TAB 2: {{CHILD_2}}]   Count: {{N}} | Quick actions: View, Add    â”‚   â”‚
â”‚ â”‚ [TAB 3: {{CHILD_3}}]   Count: {{N}} | Quick actions: View, Add    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Cross-References (links to other masters):                        â”‚   â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚   â”‚
â”‚ â”‚ â€¢ Owner â†’ User profile (view only)                                â”‚   â”‚
â”‚ â”‚ â€¢ Category â†’ Category detail (view only)                          â”‚   â”‚
â”‚ â”‚ â€¢ Parent â†’ Parent entity (navigate up)                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACCESS CONTROL PER RELATIONSHIP                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚                                                                         â”‚
â”‚ | Relationship | View | Add | Edit | Delete | Filter |                  â”‚
â”‚ |--------------|------|-----|------|--------|--------|                  â”‚
â”‚ | {{CHILD_1}}  | âœ“    | âœ“   | âœ“    | âœ“      | âœ“      |                  â”‚
â”‚ | {{CHILD_2}}  | âœ“    | âœ“   | âœ—    | âœ—      | âœ“      |                  â”‚
â”‚ | {{REF}}      | âœ“    | âœ—   | âœ—    | âœ—      | âœ—      |                  â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Data Access Summary Table:**

| From Context | Data Accessible | Access Type | Actions Available |
|--------------|-----------------|-------------|-------------------|
| {{MASTER}} Detail | {{CHILD_1}} list | Owned | CRUD, Filter, Export |
| {{MASTER}} Detail | {{CHILD_2}} list | Owned | CRUD, Filter |
| {{MASTER}} Detail | {{REF_ENTITY}} | Reference | View only |
| {{CHILD}} Detail | Parent {{MASTER}} | Parent | View, Navigate up |

### Step 4: Field specifications

For each form, precisely document the fields:

| Field | Label | Type | Mandatory | Validation | Default | Help |
|-------|-------|------|-----------|------------|---------|------|
| `name` | Name | text | Yes | 2-100 chars, alphanum | - | "Unique name" |
| `email` | Email | email | Yes | Valid email format | - | - |
| `status` | Status | select | Yes | [active, inactive] | active | - |
| `date` | Date | date | No | >= today | today | - |

**Validation Behavior (mandatory for forms):**

| Field | Trigger | Debounce | Async Check | Priority | Error Display |
|-------|---------|----------|-------------|----------|---------------|
| `name` | onBlur | 300ms | Uniqueness API | 1 | Below field |
| `email` | onChange | 500ms | Format only | 2 | Below field |
| `password` | onChange | 0ms | Strength meter | 3 | Inline indicator |

**Validation Order:**
1. Required fields checked first (immediate, no debounce)
2. Format validations second (client-side, with debounce)
3. Async validations last (API calls, with debounce + loading indicator)

### Step 4bis: Conditional Fields (if form has dynamic fields)

For forms with fields that appear/hide based on other field values:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONDITIONAL FIELDS - Form {{FORM_NAME}}                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ FIELD VISIBILITY RULES                                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚                                                                         â”‚
â”‚ | Trigger Field | Trigger Value | Fields Shown    | Fields Hidden |    â”‚
â”‚ |---------------|---------------|-----------------|---------------|    â”‚
â”‚ | type          | "internal"    | department      | url, apiKey   |    â”‚
â”‚ | type          | "external"    | url, apiKey     | department    |    â”‚
â”‚ | hasExpiry     | true          | expiryDate      | -             |    â”‚
â”‚ | hasExpiry     | false         | -               | expiryDate    |    â”‚
â”‚                                                                         â”‚
â”‚ CONDITIONAL VALIDATION                                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚ â€¢ type="external" â†’ url is REQUIRED                                     â”‚
â”‚ â€¢ type="internal" â†’ department is REQUIRED                              â”‚
â”‚ â€¢ hasExpiry=true â†’ expiryDate must be > today                           â”‚
â”‚ â€¢ Hidden fields are NOT validated (skip validation when hidden)         â”‚
â”‚                                                                         â”‚
â”‚ UI BEHAVIOR                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚ â€¢ Hidden fields: display: none (not just disabled)                      â”‚
â”‚ â€¢ Animation: fade-in 200ms on show, fade-out 150ms on hide              â”‚
â”‚ â€¢ Validation: clear errors on hidden fields                             â”‚
â”‚ â€¢ Data: preserve values when hidden (restore if shown again)            â”‚
â”‚ â€¢ Default: pre-populate most common trigger value                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Conditional Fields Summary Table:**

| Trigger | Value | Shows | Hides | Required When Visible |
|---------|-------|-------|-------|----------------------|
| {{TRIGGER}} | {{VALUE}} | {{FIELDS}} | {{FIELDS}} | {{YES/NO}} |

### Step 4ter: Form Wizard (for multi-step forms)

For complex forms requiring multiple steps:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FORM WIZARD: {{WIZARD_NAME}}                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ STEPS OVERVIEW                                                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚ [1. Basic Info] â†’ [2. Configuration] â†’ [3. Review] â†’ [4. Confirm]       â”‚
â”‚      â—                 â—‹                   â—‹              â—‹              â”‚
â”‚                                                                         â”‚
â”‚ | Step | Name          | Fields              | Validation        |      â”‚
â”‚ |------|---------------|---------------------|-------------------|      â”‚
â”‚ | 1    | Basic Info    | name, type          | Required, unique  |      â”‚
â”‚ | 2    | Configuration | settings[]          | At least 1        |      â”‚
â”‚ | 3    | Review        | (read-only summary) | None              |      â”‚
â”‚ | 4    | Confirm       | acceptTerms         | Must be checked   |      â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NAVIGATION RULES                                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚ â€¢ Next: Validate current step BEFORE proceeding (block if invalid)      â”‚
â”‚ â€¢ Back: Always allowed, preserve all data                               â”‚
â”‚ â€¢ Direct jump: Only to COMPLETED steps (click on step indicator)        â”‚
â”‚ â€¢ Browser back: Confirm modal "Unsaved changes will be lost"            â”‚
â”‚ â€¢ URL state: Update URL hash (#step-2) for bookmarking                  â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DATA PERSISTENCE                                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚ â€¢ Auto-save: After each step completion (localStorage or draft API)     â”‚
â”‚ â€¢ Resume: On page reload, restore to last completed step                â”‚
â”‚ â€¢ Clear: On successful submit OR explicit cancel                        â”‚
â”‚ â€¢ Expiry: Draft expires after {{X}} hours (configurable)                â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PROGRESS INDICATOR                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚ â€¢ Show: Step numbers + names                                            â”‚
â”‚ â€¢ Current: Highlighted (bold, primary color)                            â”‚
â”‚ â€¢ Completed: Show âœ“ checkmark, clickable                                â”‚
â”‚ â€¢ Future: Grayed out, not clickable                                     â”‚
â”‚ â€¢ Mobile: Collapse to "Step 2 of 4" + progress bar                      â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ERROR HANDLING                                                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚ â€¢ Step validation fail: Scroll to first error, focus field              â”‚
â”‚ â€¢ API error on save: Show toast, keep on current step                   â”‚
â”‚ â€¢ Session expired: Save to localStorage, prompt re-login                â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 4quater: Error Recovery Patterns

Document how the UI handles and recovers from errors:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ERROR RECOVERY PATTERNS                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PATTERN 1: Conflict Resolution Modal (409 Concurrent Edit)              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚ Trigger: Another user modified the same record while editing            â”‚
â”‚                                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚ âš ï¸ Conflict Detected                                    â”‚             â”‚
â”‚ â”‚                                                         â”‚             â”‚
â”‚ â”‚ This item was modified by {{userName}} at {{time}}.     â”‚             â”‚
â”‚ â”‚                                                         â”‚             â”‚
â”‚ â”‚ Your changes:        Server version:                    â”‚             â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚             â”‚
â”‚ â”‚ â”‚ Name: "Foo" â”‚      â”‚ Name: "Bar" â”‚ â† different        â”‚             â”‚
â”‚ â”‚ â”‚ Status: X   â”‚      â”‚ Status: X   â”‚ â† same             â”‚             â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚             â”‚
â”‚ â”‚                                                         â”‚             â”‚
â”‚ â”‚ [Discard my changes] [Override anyway] [Merge manually] â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”‚ Actions:                                                                â”‚
â”‚ â€¢ Discard: Reload with server version, lose local changes               â”‚
â”‚ â€¢ Override: Force save local version (requires confirmation)            â”‚
â”‚ â€¢ Merge: Open diff view, manually select each field                     â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PATTERN 2: Retry with Exponential Backoff (Network Error)               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚ Trigger: Network timeout, 5xx errors, connection lost                   â”‚
â”‚                                                                         â”‚
â”‚ Retry sequence:                                                         â”‚
â”‚ â€¢ Attempt 1: Immediate                                                  â”‚
â”‚ â€¢ Attempt 2: After 2 seconds                                            â”‚
â”‚ â€¢ Attempt 3: After 5 seconds                                            â”‚
â”‚ â€¢ Give up: Show manual options                                          â”‚
â”‚                                                                         â”‚
â”‚ UI during retry:                                                        â”‚
â”‚ â€¢ Spinner + "Retrying... (attempt 2 of 3)"                              â”‚
â”‚ â€¢ [Cancel] button to stop retrying                                      â”‚
â”‚                                                                         â”‚
â”‚ After give up:                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚ âš ï¸ Connection Failed                                    â”‚             â”‚
â”‚ â”‚                                                         â”‚             â”‚
â”‚ â”‚ We couldn't save your changes after 3 attempts.         â”‚             â”‚
â”‚ â”‚                                                         â”‚             â”‚
â”‚ â”‚ [Retry now] [Save offline] [Discard]                    â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PATTERN 3: Optimistic Update with Rollback                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚ Trigger: Quick actions (toggle, like, small updates)                    â”‚
â”‚                                                                         â”‚
â”‚ Behavior:                                                               â”‚
â”‚ 1. Update UI immediately (optimistic)                                   â”‚
â”‚ 2. Send API request in background                                       â”‚
â”‚ 3. If success: Do nothing (already updated)                             â”‚
â”‚ 4. If failure: Revert UI + show toast "Failed to save"                  â”‚
â”‚                                                                         â”‚
â”‚ UI feedback:                                                            â”‚
â”‚ â€¢ Subtle loading indicator (not blocking)                               â”‚
â”‚ â€¢ Toast on failure with [Retry] action                                  â”‚
â”‚ â€¢ Form data preserved for retry                                         â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PATTERN 4: Stale Data Warning (Long Session)                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚ Trigger: User has had form open for > 10 minutes                        â”‚
â”‚                                                                         â”‚
â”‚ Before submit, check if server version changed:                         â”‚
â”‚ â€¢ If unchanged: Proceed normally                                        â”‚
â”‚ â€¢ If changed: Show PATTERN 1 (Conflict Resolution)                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Error Recovery Summary Table:**

| Error Type | HTTP Code | Pattern | User Action Options |
|------------|-----------|---------|---------------------|
| Concurrent edit | 409 | Conflict Modal | Discard, Override, Merge |
| Network error | timeout/5xx | Retry + Backoff | Retry, Save offline, Discard |
| Validation error | 400 | Inline errors | Fix and resubmit |
| Session expired | 401 | Re-login prompt | Login, Save draft |
| Permission denied | 403 | Error page | Go back, Contact admin |

### Step 5: API specifications (if applicable)

For each endpoint, document:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ENDPOINT: {{METHOD}} {{ROUTE}}                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Description: {{DESCRIPTION}}                                            â”‚
â”‚ Authentication: {{AUTH_REQUIRED}}                                       â”‚
â”‚ Authorized roles: {{ROLES}}                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ REQUEST                                                                 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€                                                                 â”‚
â”‚ Headers:                                                                â”‚
â”‚   Authorization: Bearer {{token}}                                       â”‚
â”‚   Content-Type: application/json                                        â”‚
â”‚                                                                         â”‚
â”‚ Path params:                                                            â”‚
â”‚   {{param}}: {{type}} - {{description}}                                 â”‚
â”‚                                                                         â”‚
â”‚ Query params:                                                           â”‚
â”‚   page: int (default: 1) - Page number                                  â”‚
â”‚   limit: int (default: 20, max: 100) - Items per page                   â”‚
â”‚                                                                         â”‚
â”‚ Body (JSON):                                                            â”‚
â”‚   {                                                                     â”‚
â”‚     "field1": "string (required, 2-100)",                               â”‚
â”‚     "field2": "number (optional)"                                       â”‚
â”‚   }                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RESPONSES                                                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                               â”‚
â”‚ 200 OK:                                                                 â”‚
â”‚   {                                                                     â”‚
â”‚     "data": [...],                                                      â”‚
â”‚     "pagination": { "page": 1, "total": 100 }                           â”‚
â”‚   }                                                                     â”‚
â”‚                                                                         â”‚
â”‚ 400 Bad Request:                                                        â”‚
â”‚   { "error": "Validation failed", "details": [...] }                    â”‚
â”‚                                                                         â”‚
â”‚ 401 Unauthorized:                                                       â”‚
â”‚   { "error": "Authentication required" }                                â”‚
â”‚                                                                         â”‚
â”‚ 403 Forbidden:                                                          â”‚
â”‚   { "error": "Insufficient permissions" }                               â”‚
â”‚                                                                         â”‚
â”‚ 404 Not Found:                                                          â”‚
â”‚   { "error": "Resource not found" }                                     â”‚
â”‚                                                                         â”‚
â”‚ 500 Internal Server Error:                                              â”‚
â”‚   { "error": "An unexpected error occurred" }                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ APPLICABLE BUSINESS RULES                                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚ â€¢ BR-001: {{RULE}}                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 6: Acceptance criteria (Gherkin)

For each requirement, write testable criteria:

```gherkin
Feature: {{FEATURE_NAME}}

  Background:
    Given the user is logged in with role "{{ROLE}}"
    And they are on page "{{PAGE}}"

  @{{TAG}}
  Scenario: {{SCENARIO_NAME}} - Happy path
    Given {{PRECONDITION}}
    When the user {{ACTION}}
    Then the system {{EXPECTED_RESULT}}
    And {{ADDITIONAL_VERIFICATION}}

  @{{TAG}}
  Scenario: {{SCENARIO_NAME}} - Error case
    Given {{PRECONDITION}}
    When the user {{INVALID_ACTION}}
    Then the system displays message "{{ERROR_MESSAGE}}"
    And {{PRESERVED_STATE}}

  @{{TAG}}
  Scenario Outline: {{SCENARIO_NAME}} - Validation
    Given the user enters "<value>" in field "{{FIELD}}"
    When they submit the form
    Then the result is "<result>"

    Examples:
      | value         | result      |
      | valid_value   | success     |
      | empty_value   | error       |
      | too_long      | error       |

  # MANDATORY EDGE CASES (at least 2 of these)
  @edge @network
  Scenario: Network timeout during submission
    Given the user fills the form correctly
    When they submit and the network times out after 10 seconds
    Then the system displays "Connection timeout. Please try again."
    And the form data is preserved
    And a [Retry] button is displayed

  @edge @concurrent
  Scenario: Concurrent modification conflict
    Given another user modified the same resource
    When the user submits their changes
    Then the system displays "This item was modified. Refresh to see changes."
    And provides [Refresh] and [Override] options

  @edge @offline
  Scenario: Offline mode handling
    Given the user loses network connectivity
    When they try to perform an action
    Then the system displays "You are offline. Changes will sync when reconnected."
    And queues the action for retry (if applicable)
```

### Step 7: Completeness checklist (85% minimum)

Evaluate with the checklist:

```bash
cat .claude/commands/business-analyse/_resources/checklist-specification.md
```

| Category | Criterion | Status |
|----------|-----------|--------|
| **Context (4/4)** | | |
| | Objective documented | âœ“/âœ— |
| | Scope defined | âœ“/âœ— |
| | Stakeholders identified | âœ“/âœ— |
| | Priority established | âœ“/âœ— |
| **Use Cases (6/6)** | | |
| | Complete happy path | âœ“/âœ— |
| | Extensions documented | âœ“/âœ— |
| | Preconditions | âœ“/âœ— |
| | Postconditions | âœ“/âœ— |
| | Actors identified | âœ“/âœ— |
| | Linked business rules | âœ“/âœ— |
| **State Machine (3/3)** | _(if entity has status field)_ | |
| | States defined with transitions | âœ“/âœ—/N/A |
| | Transition conditions documented | âœ“/âœ—/N/A |
| | Illegal transitions marked | âœ“/âœ—/N/A |
| **Interface (6/6)** | | |
| | Wireframes present | âœ“/âœ— |
| | URLs defined | âœ“/âœ— |
| | Roles per screen | âœ“/âœ— |
| | Interactive elements | âœ“/âœ— |
| | Messages defined | âœ“/âœ— |
| | Front validations | âœ“/âœ— |
| **List Patterns (4/4)** | _(if list pages present)_ | |
| | Bulk operations documented | âœ“/âœ—/N/A |
| | Search/Filter patterns defined | âœ“/âœ—/N/A |
| | Pagination strategy specified | âœ“/âœ—/N/A |
| | Empty/Loading states | âœ“/âœ—/N/A |
| **Form Patterns (3/3)** | _(if forms present)_ | |
| | Conditional fields documented | âœ“/âœ—/N/A |
| | Validation behavior (async, debounce) | âœ“/âœ—/N/A |
| | Form wizard steps (if multi-step) | âœ“/âœ—/N/A |
| **Error Handling (4/4)** | | |
| | Error recovery patterns documented | âœ“/âœ— |
| | Conflict resolution UI (409) | âœ“/âœ— |
| | Retry logic (network errors) | âœ“/âœ— |
| | Optimistic update behavior | âœ“/âœ— |
| **Data (5/5)** | | |
| | Fields specified | âœ“/âœ— |
| | Data types | âœ“/âœ— |
| | Validations | âœ“/âœ— |
| | Default values | âœ“/âœ— |
| | Mandatory/optional | âœ“/âœ— |
| **API (5/5)** | | |
| | Endpoints documented | âœ“/âœ— |
| | Request/Response | âœ“/âœ— |
| | Error codes | âœ“/âœ— |
| | Auth/Permissions | âœ“/âœ— |
| | Back validations | âœ“/âœ— |
| **Tests (4/4)** | | |
| | Acceptance criteria | âœ“/âœ— |
| | Gherkin scenarios | âœ“/âœ— |
| | Nominal cases | âœ“/âœ— |
| | Error cases | âœ“/âœ— |
| **Navigation (4/4)** | _(if hierarchical data)_ | |
| | Navigation Matrix defined | âœ“/âœ—/N/A |
| | Data Access Patterns documented | âœ“/âœ—/N/A |
| | Context preservation rules | âœ“/âœ—/N/A |
| | Breadcrumb structure | âœ“/âœ—/N/A |
| **Accessibility (4/4)** | _(mandatory for user-facing)_ | |
| | Focus management after actions | âœ“/âœ— |
| | Error announcements for screen readers | âœ“/âœ— |
| | Keyboard navigation (Tab order) | âœ“/âœ— |
| | Touch targets >= 44x44px | âœ“/âœ— |

**Score**: {{X}}/52 ({{PERCENT}}%)
_(Base: 30, +3 state machine, +4 list patterns, +3 form patterns, +4 error handling, +4 nav, +4 a11y if applicable)_
**Threshold**: 85%

### Step 7bis: Implementation plan (if complexity > Standard)

**Trigger**: If complexity detected in phase 2-Discover is "Complex" or "Critical", breakdown into testable phases is **mandatory**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMPLEMENTATION PLAN - Breakdown into testable phases                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Detected complexity: {{COMPLEXITY}}                                     â”‚
â”‚ Breakdown: {{MANDATORY if Complex/Critical | OPTIONAL if Standard}}     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PHASE 1: DATA LAYER (Backend - Testable in isolation)                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”‚
â”‚ Scope:                                                                  â”‚
â”‚   â€¢ Entities / Data models                                              â”‚
â”‚   â€¢ EF Core migrations / SQL                                            â”‚
â”‚   â€¢ Repository pattern (if applicable)                                  â”‚
â”‚   â€¢ Seed data (test data)                                               â”‚
â”‚                                                                         â”‚
â”‚ Deliverable: Functional data model                                      â”‚
â”‚ Tests: Repository unit tests + Migration tests                          â”‚
â”‚ Validation criterion: `dotnet ef database update` OK                    â”‚
â”‚ Complexity estimate: {{LOW|MEDIUM|HIGH}}                                â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PHASE 2: API LAYER (Backend - Testable in isolation)                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚ Scope:                                                                  â”‚
â”‚   â€¢ Controllers / REST Endpoints                                        â”‚
â”‚   â€¢ Services / Business logic                                           â”‚
â”‚   â€¢ Backend validations                                                 â”‚
â”‚   â€¢ DTOs / Mapping                                                      â”‚
â”‚                                                                         â”‚
â”‚ Deliverable: Functional API (Swagger/Postman testable)                  â”‚
â”‚ Tests: API integration tests + Service unit tests                       â”‚
â”‚ Validation criterion: All endpoints respond correctly                   â”‚
â”‚ Dependencies: Phase 1 complete                                          â”‚
â”‚ Complexity estimate: {{LOW|MEDIUM|HIGH}}                                â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PHASE 3: UI LAYER (Frontend - Testable in isolation)                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚ Scope:                                                                  â”‚
â”‚   â€¢ UI Components (React/Angular/Vue/Blazor)                            â”‚
â”‚   â€¢ State management                                                    â”‚
â”‚   â€¢ Forms and front-end validations                                     â”‚
â”‚   â€¢ API integration (HTTP calls)                                        â”‚
â”‚                                                                         â”‚
â”‚ Deliverable: Functional user interface                                  â”‚
â”‚ Tests: Component tests + E2E tests (Cypress/Playwright)                 â”‚
â”‚ Validation criterion: Gherkin scenarios pass in E2E                     â”‚
â”‚ Dependencies: Phase 2 complete (API available)                          â”‚
â”‚ Complexity estimate: {{LOW|MEDIUM|HIGH}}                                â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚ PHASE 4: INTEGRATION & FINALIZATION                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚ Scope:                                                                  â”‚
â”‚   â€¢ Complete wiring (front â†” back)                                      â”‚
â”‚   â€¢ Complete end-to-end tests                                           â”‚
â”‚   â€¢ Performance / Optimization                                          â”‚
â”‚   â€¢ Technical documentation                                             â”‚
â”‚                                                                         â”‚
â”‚ Deliverable: Complete and validated feature                             â”‚
â”‚ Tests: Complete E2E suite + Load tests (if applicable)                  â”‚
â”‚ Validation criterion: UAT (User Acceptance Testing) OK                  â”‚
â”‚ Dependencies: Phases 1, 2, 3 complete                                   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Phase summary table:**

| Phase | Scope | Deliverable | Tests | Validation | Deps |
|-------|-------|-------------|-------|------------|------|
| 1. Data | Entities, Migrations | DB Schema | Unit + Migration | EF OK | - |
| 2. API | Endpoints, Services | REST API | Integration | Swagger OK | P1 |
| 3. UI | Components, Forms | Interface | E2E | Gherkin OK | P2 |
| 4. Integration | Wiring, Perf | Feature | Full E2E | UAT OK | P1-3 |

**Breakdown rule:**

| Complexity | Required phases | Justification |
|------------|-----------------|---------------|
| Simple CRUD | No breakdown | Direct implementation possible |
| Standard | Optional | Recommended if > 3 endpoints |
| Complex | **Mandatory** | Too many risks without breakdown |
| Critical | **Mandatory + Reviews** | Each phase requires validation |

### Step 8: Generate FRD

Create `3-functional-specification.md`:

```markdown
# Functional Requirements Document - {{FEATURE_NAME}}

**ID**: {{FEAT-XXX}}
**Version**: 1.0
**Date**: {{DATE}}
**Status**: Draft
**Author**: Claude (Business Analyse)
**Source**: BRD v1.0

---

## 1. Overview

### 1.1 Objective
{{OBJECTIVE}}

### 1.2 References
| Document | Version | Link |
|----------|---------|------|
| BRD | 1.0 | [2-business-requirements.md](./2-business-requirements.md) |
| Discovery | 1.0 | [1-discovery.md](./1-discovery.md) |

### 1.3 Terminology
See [glossary.md](../../../glossary.md)

---

## 2. Use Cases

### 2.1 Use case diagram

```mermaid
graph LR
    subgraph Actors
        A1[{{ACTOR_1}}]
        A2[{{ACTOR_2}}]
    end
    subgraph "Feature: {{NAME}}"
        UC1((UC-001))
        UC2((UC-002))
    end
    A1 --> UC1
    A1 --> UC2
    A2 --> UC1
```

### 2.2 UC-001: {{NAME}}

{{COMPLETE_USE_CASE}}

### 2.3 UC-002: {{NAME}}

{{COMPLETE_USE_CASE}}

---

## 3. Interface Specifications

### 3.1 Navigation plan

```mermaid
flowchart TD
    {{NAVIGATION_FLOW}}
```

### 3.2 Navigation Matrix (if hierarchical data)

> **Note**: Include this section if the feature involves Master-Detail relationships or hierarchical data access.

**Entry Point**: {{MODULE_ROUTE}}

| From Entity | To Entity | Route Pattern | Relationship | Context Preserved |
|-------------|-----------|---------------|--------------|-------------------|
| {{MASTER}} | {{CHILD_1}} | /{{master}}/{id}/{{child1}} | 1:N | Master ID, Name |
| {{MASTER}} | {{CHILD_2}} | /{{master}}/{id}/{{child2}} | 1:N | Master ID, Name |

**Context Rules:**
- Parent context visible in breadcrumb
- Child operations scoped to parent
- Back navigation preserves filter state

### 3.3 Data Access Patterns (if hierarchical data)

> **Note**: Include this section if users need to access related data from a parent context.

| From Context | Data Accessible | Access Type | Actions Available |
|--------------|-----------------|-------------|-------------------|
| {{MASTER}} Detail | {{CHILD_1}} list | Owned | CRUD, Filter, Export |
| {{MASTER}} Detail | {{CHILD_2}} list | Owned | CRUD, Filter |
| {{MASTER}} Detail | {{REF_ENTITY}} | Reference | View only |

### 3.4 Screens

#### 3.4.1 {{SCREEN_NAME}}

{{ASCII_WIREFRAME}}

#### 3.4.2 {{SCREEN_NAME}}

{{ASCII_WIREFRAME}}

---

## 4. Data Specifications

### 4.1 Forms

#### {{FORM_NAME}}

| Field | Label | Type | Mandatory | Validation | Default | Help |
|-------|-------|------|-----------|------------|---------|------|
{{FIELDS_TABLE}}

---

## 5. API Specifications

### 5.1 Endpoints

| Method | Route | Description | Auth |
|--------|-------|-------------|------|
{{ENDPOINTS_TABLE}}

### 5.2 Endpoint details

{{ENDPOINT_DETAILS}}

---

## 6. Validation Rules

### 6.1 Front-end Validations

| Field | Rule | Error message |
|-------|------|---------------|
{{FRONT_VALIDATION}}

### 6.2 Back-end Validations

| Endpoint | Rule | Code | Message |
|----------|------|------|---------|
{{BACK_VALIDATION}}

---

## 7. Messages and Notifications

### 7.1 Success messages

| Action | Message |
|--------|---------|
{{SUCCESS_MESSAGES}}

### 7.2 Error messages

| HTTP Code | Error Type | User Message | Recovery Action |
|-----------|------------|--------------|-----------------|
| 400 | Validation | "{{field}} is invalid: {{reason}}" | Fix field and retry |
| 401 | Auth | "Session expired. Please log in again." | Redirect to login |
| 403 | Permission | "You don't have permission for this action." | Contact admin |
| 404 | Not Found | "{{Resource}} not found." | Go back to list |
| 409 | Conflict | "'{{value}}' already exists." | Use different value |
| 500 | Server | "Something went wrong. Please try again." | Retry or contact support |

**Error message requirements:**
- Always include the problematic value in context (e.g., "Name 'foo' already exists")
- Provide actionable recovery (button or instruction)
- Never expose technical details (stack traces, SQL errors)

---

## 8. Acceptance Criteria

### 8.1 Test scenarios

```gherkin
{{GHERKIN_SCENARIOS}}
```

### 8.2 Coverage matrix

| Requirement | Use Case | Scenario | Status |
|-------------|----------|----------|--------|
{{COVERAGE_MATRIX}}

---

## 9. Implementation Plan

> **Note**: This section is mandatory if complexity = Complex or Critical

### 9.1 Phase breakdown

| Phase | Scope | Deliverable | Tests | Validation | Status |
|-------|-------|-------------|-------|------------|--------|
| 1. Data | {{DATA_SCOPE}} | DB Schema | Unit | EF OK | â³ |
| 2. API | {{API_SCOPE}} | REST API | Integration | Swagger OK | â³ |
| 3. UI | {{UI_SCOPE}} | Interface | E2E | Gherkin OK | â³ |
| 4. Integration | Wiring | Feature | Full E2E | UAT OK | â³ |

### 9.2 Phase 1 Detail: Data Layer

**Scope:**
{{DATA_LAYER_DETAILS}}

**Entities to create:**
- [ ] {{ENTITY_1}}
- [ ] {{ENTITY_2}}

**Migrations:**
- [ ] {{MIGRATION_NAME}}

**Validation criterion:** `dotnet ef database update` without errors

### 9.3 Phase 2 Detail: API Layer

**Scope:**
{{API_LAYER_DETAILS}}

**Endpoints to implement:**
- [ ] {{ENDPOINT_1}}
- [ ] {{ENDPOINT_2}}

**Validation criterion:** All endpoints testable via Swagger/Postman

### 9.4 Phase 3 Detail: UI Layer

**Scope:**
{{UI_LAYER_DETAILS}}

**Components to create:**
- [ ] {{COMPONENT_1}}
- [ ] {{COMPONENT_2}}

**Validation criterion:** Gherkin scenarios pass in E2E

### 9.5 Phase 4 Detail: Integration

**Scope:**
- Front â†” back wiring
- Complete end-to-end tests
- Performance optimizations

**Validation criterion:** UAT (User Acceptance Testing) OK

---

## 10. Appendices

### 10.1 Completeness checklist

Score: {{SCORE}}/30 ({{PERCENT}}%) _(+4 if hierarchical data: {{SCORE}}/34)_

**Navigation criteria (if applicable):**
- [ ] Navigation Matrix defined
- [ ] Data Access Patterns documented
- [ ] Context preservation rules
- [ ] Breadcrumb structure

### 10.2 Accessibility Requirements (per component)

| Component | ARIA Role | Label Required | Focus Trap | Screen Reader Announcement |
|-----------|-----------|----------------|------------|----------------------------|
| Modal | `dialog` | Yes (title) | Yes | "Dialog opened: {title}" |
| Toast | `alert` | No | No | Auto-announce on appear |
| Dropdown | `listbox` | Yes | No | "{n} options available" |
| Table | `table` | Caption | No | Row/column headers |
| Form | `form` | Submit button | No | Errors on submit |
| Button | `button` | Yes (action) | No | State if toggle |

**Focus management rules:**
- After modal close â†’ return focus to trigger element
- After item delete â†’ focus next item or "empty" message
- After form submit success â†’ focus success message or redirect

### 10.3 Resolved questions

{{RESOLVED_QUESTIONS}}

### 10.3 Decisions made

| Decision | Justification | Date |
|----------|---------------|------|
{{DECISIONS}}

---

## Modification History

| Version | Date | Author | Modifications |
|---------|------|--------|---------------|
| 1.0 | {{DATE}} | Claude BA | Initial creation |

---

*Generated by Business Analyse - {{DATE}}*
```

### Summary

```
SPECIFICATIONS COMPLETE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Feature:     {{FEAT-XXX}} - {{NAME}}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Content:
  â€¢ Use Cases:       {{X}} documented
  â€¢ Screens:         {{Y}} wireframed
  â€¢ Endpoints:       {{Z}} specified
  â€¢ Criteria:        {{W}} Gherkin scenarios

Completeness score:  {{SCORE}}/30 ({{PERCENT}}%)
Threshold:           85% (26/30) âœ“/âœ—
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Document: .../{{FEAT-XXX}}/3-functional-specification.md
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Next: /business-analyse:document {{FEAT-XXX}}
```

## Rules

1. **ULTRATHINK mandatory** - Maximum precision
2. **Zero ambiguity** - Each spec must be clear
3. **ASCII Wireframes** - Visualization without external tools
4. **Testable Gherkin** - Verifiable criteria
5. **85%+ Score** - Minimum to validate
6. **No code** - Functional specs, not technical
7. **Mandatory breakdown if Complex/Critical** - Testable API/UI/Integration phases

## Content Rules (CRITICAL)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  FRD IS A FUNCTIONAL DOCUMENT - NOT A TECHNICAL GUIDE                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                          â•‘
â•‘  The FRD describes WHAT the system should do, not HOW to build it.       â•‘
â•‘  It is written for stakeholders, product owners, and developers          â•‘
â•‘  to UNDERSTAND requirements - not to copy-paste code.                    â•‘
â•‘                                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### ALLOWED in FRD âœ“

| Category | Content Type | Example |
|----------|--------------|---------|
| **Use Cases** | Actor-based scenarios | "User clicks Save, system validates..." |
| **Wireframes** | ASCII mockups | Visual layout with `â”Œâ”€â”€â”€â”€â”€â”` boxes |
| **Fields** | Specification tables | `name \| string \| 2-100 chars \| required` |
| **API Specs** | Endpoint descriptions | `POST /api/resource` with response structure |
| **Business Rules** | Text descriptions | "BR-001: Name must be unique" |
| **Messages** | User-facing text | "Item created successfully" |
| **Gherkin** | Acceptance criteria | `Given/When/Then` scenarios |
| **ER Diagrams** | Mermaid relationships | Entity relationships |

### Rule Levels: Business vs Functional vs Technical

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  THREE LEVELS OF RULES - KNOW THE DIFFERENCE                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                          â•‘
â•‘  BUSINESS RULE (BA writes, PO validates)                                 â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â•‘
â•‘  "Each domain must have an identified owner"                             â•‘
â•‘  â†’ WHY something must happen (business value)                            â•‘
â•‘                                                                          â•‘
â•‘  FUNCTIONAL CONSTRAINT (BA writes)                                       â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â•‘
â•‘  "Name field accepts 2-100 characters"                                   â•‘
â•‘  â†’ WHAT the system enforces (user-facing behavior)                       â•‘
â•‘                                                                          â•‘
â•‘  TECHNICAL IMPLEMENTATION (Developer decides)                            â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â•‘
â•‘  "VARCHAR(100) NOT NULL, FK constraint"                                  â•‘
â•‘  â†’ HOW it's built (code-level detail)                                    â•‘
â•‘                                                                          â•‘
â•‘  âš ï¸ FRD contains BUSINESS + FUNCTIONAL only. Never TECHNICAL.            â•‘
â•‘                                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**Rule writing examples:**

| Level | WRONG âŒ | CORRECT âœ“ |
|-------|----------|-----------|
| Business | "Add FK to User table" | "Owner must be a registered user" |
| Functional | "VARCHAR(100)" | "Name: 2-100 characters" |
| Technical | _(not in FRD)_ | _(developer decides)_ |

### FORBIDDEN in FRD âœ—

| Category | Why Forbidden | Instead Use |
|----------|---------------|-------------|
| **Source Code** (C#, JS, Python) | FRD is not implementation | Describe behavior in text |
| **Class Definitions** | Technical detail | Entity attribute tables |
| **SQL Scripts** | Database implementation | Seed data described in tables |
| **Razor/HTML Components** | UI implementation | ASCII wireframes |
| **Controller/Service Code** | Backend implementation | API endpoint descriptions |
| **Migration Code** | EF Core detail | Entity relationship descriptions |

### Examples

**WRONG** âŒ (Code in FRD):
```csharp
public class DataGovernanceRole
{
    public int Id { get; set; }
    public string Name { get; set; }
}
```

**CORRECT** âœ“ (Functional description):
```
Entity: DataGovernanceRole
| Attribute | Type | Constraints | Business Purpose |
|-----------|------|-------------|------------------|
| Id | integer | PK, auto | Unique identifier |
| Name | string | max 100, required | Display name for UI |
```

**WRONG** âŒ (SQL in FRD):
```sql
INSERT INTO Roles VALUES ('DATA_OWNER', 'Data Owner');
```

**CORRECT** âœ“ (Seed data description):
```
Initial Data (to be seeded):
| Code | Name | Description |
|------|------|-------------|
| DATA_OWNER | Data Owner | Business owner responsible for data value |
```
