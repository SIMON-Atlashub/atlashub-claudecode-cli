<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hooks - Claude Tools</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Global Header (single unified element) -->
        <header class="global-header">
            <div class="logo">CT</div>
            <span class="site-title">Claude Tools</span>
            <span class="version-badge">v1.6.1</span>
            <div class="header-divider"></div>
            <span class="page-title">Hooks</span>
            <nav class="breadcrumb">
                <a href="index.html">
                    <span data-lang="fr">Accueil</span>
                    <span data-lang="en">Home</span>
                </a>
                <span class="breadcrumb-separator">&#8250;</span>
                <span data-lang="fr">Outils</span>
                <span data-lang="en">Tools</span>
                <span class="breadcrumb-separator">&#8250;</span>
                <span class="breadcrumb-current">Hooks</span>
            </nav>
            <!-- Language Select -->
            <select class="lang-select" id="lang-select" onchange="setLanguage(this.value); localStorage.setItem('doc-language', this.value);">
                <option value="fr">ðŸ‡«ðŸ‡· FR</option>
                <option value="en">ðŸ‡¬ðŸ‡§ EN</option>
            </select>
            <!-- Search -->
            <div class="header-search">
                <div class="search-input-wrapper">
                    <span class="search-icon">&#128269;</span>
                    <input type="text" id="search-input" class="search-input" placeholder="Rechercher..." data-placeholder-fr="Rechercher..." data-placeholder-en="Search..." autocomplete="off">
                    <span class="search-shortcut">Ctrl+K</span>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
        </header>

        <!-- App Body -->
        <div class="app-body">
            <!-- Sidebar -->
            <aside class="sidebar">
                <button class="sidebar-toggle" title="Toggle sidebar">
                    <span class="toggle-icon-collapse">&#171;</span>
                    <span class="toggle-icon-expand">&#187;</span>
                </button>

                <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">
                        <span data-lang="fr">Demarrage</span>
                        <span data-lang="en">Getting Started</span>
                    </div>
                    <a href="index.html" class="nav-item">
                        <span class="icon">&#127968;</span>
                        <span class="nav-text" data-lang="fr">Accueil</span>
                        <span class="nav-text" data-lang="en">Home</span>
                    </a>
                    <a href="installation.html" class="nav-item">
                        <span class="icon">&#128230;</span>
                        <span class="nav-text">Installation</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Workflows</div>
                    <a href="gitflow.html" class="nav-item">
                        <span class="icon">&#128256;</span>
                        <span class="nav-text">GitFlow</span>
                    </a>
                    <a href="efcore.html" class="nav-item">
                        <span class="icon">&#128452;</span>
                        <span class="nav-text">EF Core</span>
                    </a>
                    <a href="apex.html" class="nav-item">
                        <span class="icon">&#127919;</span>
                        <span class="nav-text">APEX</span>
                    </a>
                    <a href="business-analyse.html" class="nav-item">
                        <span class="icon">&#128202;</span>
                        <span class="nav-text">Business Analyse</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">
                        <span data-lang="fr">Outils</span>
                        <span data-lang="en">Tools</span>
                    </div>
                    <a href="agents.html" class="nav-item">
                        <span class="icon">&#129302;</span>
                        <span class="nav-text">Agents</span>
                    </a>
                    <a href="commands.html" class="nav-item">
                        <span class="icon">&#9889;</span>
                        <span class="nav-text" data-lang="fr">Commandes</span>
                        <span class="nav-text" data-lang="en">Commands</span>
                    </a>
                    <a href="hooks.html" class="nav-item active">
                        <span class="icon">&#128279;</span>
                        <span class="nav-text">Hooks</span>
                    </a>
                    <a href="test-web.html" class="nav-item">
                        <span class="icon">&#127760;</span>
                        <span class="nav-text">Test Web</span>
                    </a>
                </div>
            </nav>

            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <div class="content content-wide">
                <!-- Introduction -->
                <section id="introduction">
                    <h2>Introduction</h2>
                    <p data-lang="fr">
                        Les hooks Claude Code permettent d'executer des scripts automatiquement avant ou apres certaines operations. Claude Tools inclut des hooks pre-configures pour la validation des migrations EF Core et la securite.
                    </p>
                    <p data-lang="en">
                        Claude Code hooks allow running scripts automatically before or after certain operations. Claude Tools includes pre-configured hooks for EF Core migration validation and security.
                    </p>
                </section>

                <!-- Hook Types -->
                <section id="types">
                    <h2>
                        <span data-lang="fr">Types de hooks</span>
                        <span data-lang="en">Hook Types</span>
                    </h2>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Hook</th>
                                    <th>
                                        <span data-lang="fr">Declenchement</span>
                                        <span data-lang="en">Trigger</span>
                                    </th>
                                    <th>Usage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>PreToolUse</code></td>
                                    <td>
                                        <span data-lang="fr">Avant l'execution d'un outil</span>
                                        <span data-lang="en">Before tool execution</span>
                                    </td>
                                    <td>
                                        <span data-lang="fr">Validation, securite</span>
                                        <span data-lang="en">Validation, security</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><code>PostToolUse</code></td>
                                    <td>
                                        <span data-lang="fr">Apres l'execution d'un outil</span>
                                        <span data-lang="en">After tool execution</span>
                                    </td>
                                    <td>Logging, notifications</td>
                                </tr>
                                <tr>
                                    <td><code>SessionStart</code></td>
                                    <td>
                                        <span data-lang="fr">Au demarrage de la session</span>
                                        <span data-lang="en">At session start</span>
                                    </td>
                                    <td>
                                        <span data-lang="fr">Setup environnement</span>
                                        <span data-lang="en">Environment setup</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td><code>Stop</code></td>
                                    <td>
                                        <span data-lang="fr">A la fin de la session</span>
                                        <span data-lang="en">At session end</span>
                                    </td>
                                    <td>
                                        <span data-lang="fr">Cleanup, rapports</span>
                                        <span data-lang="en">Cleanup, reports</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Configuration -->
                <section id="configuration">
                    <h2>Configuration</h2>

                    <p data-lang="fr">Les hooks sont configures dans <code>~/.claude/hooks/hooks.json</code> :</p>
                    <p data-lang="en">Hooks are configured in <code>~/.claude/hooks/hooks.json</code>:</p>

                    <div class="code-block">
                        <button class="copy-btn">Copy</button>
                        <pre><code>{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node ~/.claude/scripts/validate-command.js"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'File written: $TOOL_OUTPUT'"
          }
        ]
      }
    ]
  }
}</code></pre>
                    </div>
                </section>

                <!-- EF Core Migration Check -->
                <section id="ef-migration-check">
                    <h2>
                        <span data-lang="fr">Hook: EF Core Migration Check</span>
                        <span data-lang="en">Hook: EF Core Migration Check</span>
                    </h2>

                    <p data-lang="fr">
                        Ce hook pre-commit detecte les operations destructives dans les migrations EF Core et bloque le commit si necessaire.
                    </p>
                    <p data-lang="en">
                        This pre-commit hook detects destructive operations in EF Core migrations and blocks the commit if necessary.
                    </p>

                    <h3 data-lang="fr">Operations BLOQUANTES</h3>
                    <h3 data-lang="en">BLOCKING Operations</h3>

                    <div class="svg-diagram">
                        <svg viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg" style="font-family: 'Inter', system-ui, sans-serif;">
                            <defs>
                                <linearGradient id="criticalGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#ef4444"/>
                                    <stop offset="100%" style="stop-color:#dc2626"/>
                                </linearGradient>
                                <linearGradient id="highGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#f97316"/>
                                    <stop offset="100%" style="stop-color:#ea580c"/>
                                </linearGradient>
                                <linearGradient id="mediumGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#eab308"/>
                                    <stop offset="100%" style="stop-color:#ca8a04"/>
                                </linearGradient>
                            </defs>

                            <!-- Title -->
                            <text x="300" y="30" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="600">Destructive Operations Detection</text>

                            <!-- CRITICAL section -->
                            <rect x="30" y="50" width="540" height="90" rx="8" fill="rgba(239, 68, 68, 0.1)" stroke="#ef4444" stroke-width="1"/>
                            <text x="50" y="72" fill="#ef4444" font-size="12" font-weight="700">CRITICAL</text>

                            <g transform="translate(50, 85)">
                                <rect x="0" y="0" width="110" height="40" rx="4" fill="url(#criticalGrad)"/>
                                <text x="55" y="25" text-anchor="middle" fill="white" font-size="10" font-weight="500">DropTable</text>
                            </g>
                            <g transform="translate(170, 85)">
                                <rect x="0" y="0" width="110" height="40" rx="4" fill="url(#criticalGrad)"/>
                                <text x="55" y="25" text-anchor="middle" fill="white" font-size="10" font-weight="500">DropColumn</text>
                            </g>
                            <g transform="translate(290, 85)">
                                <rect x="0" y="0" width="110" height="40" rx="4" fill="url(#criticalGrad)"/>
                                <text x="55" y="25" text-anchor="middle" fill="white" font-size="10" font-weight="500">DeleteData</text>
                            </g>
                            <g transform="translate(410, 85)">
                                <rect x="0" y="0" width="140" height="40" rx="4" fill="url(#criticalGrad)"/>
                                <text x="70" y="25" text-anchor="middle" fill="white" font-size="10" font-weight="500">DropPrimaryKey</text>
                            </g>

                            <!-- HIGH section -->
                            <rect x="30" y="150" width="540" height="55" rx="8" fill="rgba(249, 115, 22, 0.1)" stroke="#f97316" stroke-width="1"/>
                            <text x="50" y="172" fill="#f97316" font-size="12" font-weight="700">HIGH</text>

                            <g transform="translate(50, 180)">
                                <rect x="0" y="0" width="130" height="30" rx="4" fill="url(#highGrad)"/>
                                <text x="65" y="20" text-anchor="middle" fill="white" font-size="10" font-weight="500">DropForeignKey</text>
                            </g>
                            <g transform="translate(190, 180)">
                                <rect x="0" y="0" width="110" height="30" rx="4" fill="url(#highGrad)"/>
                                <text x="55" y="20" text-anchor="middle" fill="white" font-size="10" font-weight="500">DropSchema</text>
                            </g>

                            <!-- MEDIUM section -->
                            <rect x="30" y="215" width="540" height="55" rx="8" fill="rgba(234, 179, 8, 0.1)" stroke="#eab308" stroke-width="1"/>
                            <text x="50" y="237" fill="#eab308" font-size="12" font-weight="700">MEDIUM</text>

                            <g transform="translate(50, 245)">
                                <rect x="0" y="0" width="100" height="30" rx="4" fill="url(#mediumGrad)"/>
                                <text x="50" y="20" text-anchor="middle" fill="#0f172a" font-size="10" font-weight="500">DropIndex</text>
                            </g>

                            <!-- SQL warning -->
                            <rect x="30" y="280" width="540" height="25" rx="4" fill="rgba(239, 68, 68, 0.05)" stroke="#ef4444" stroke-width="1" stroke-dasharray="4,2"/>
                            <text x="300" y="297" text-anchor="middle" fill="#ef4444" font-size="10">+ Raw SQL containing DELETE, DROP, TRUNCATE</text>
                        </svg>
                    </div>

                    <h3 data-lang="fr">Comportement</h3>
                    <h3 data-lang="en">Behavior</h3>

                    <div class="code-block">
                        <pre><code>$ git commit -m "Add migration"

Scan des migrations EF Core...
Analyse: Migrations/20240120_RemoveUsers.cs

OPERATIONS DESTRUCTIVES DETECTEES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  15: DropTable(name: "Users");
  23: DropColumn(name: "Email", table: "Profiles");
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

COMMIT BLOQUE - OPERATIONS DESTRUCTIVES DETECTEES

ACTIONS REQUISES :
1. Verifier que vous avez un BACKUP des donnees
2. Confirmer que cette suppression est intentionnelle
3. Utiliser --no-verify pour bypasser ce check</code></pre>
                    </div>

                    <h3>Bypass</h3>

                    <div class="code-block">
                        <button class="copy-btn">Copy</button>
                        <pre><code># Option 1 : Flag no-verify
git commit --no-verify -m "Drop users table (intentional)"

# Option 2 : Variable environnement
EF_MIGRATION_FORCE=1 git commit -m "message"</code></pre>
                    </div>
                </section>

                <!-- Custom Hooks -->
                <section id="custom">
                    <h2>
                        <span data-lang="fr">Creer un hook personnalise</span>
                        <span data-lang="en">Create a custom hook</span>
                    </h2>

                    <div class="code-block">
                        <button class="copy-btn">Copy</button>
                        <pre><code>{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node my-validation-script.js",
            "blocking": true
          }
        ]
      }
    ]
  }
}</code></pre>
                    </div>

                    <div class="alert alert-info">
                        <span class="alert-icon">&#128161;</span>
                        <div class="alert-content">
                            <h5 data-lang="fr">Variables d'environnement</h5>
                            <h5 data-lang="en">Environment variables</h5>
                            <p data-lang="fr">
                                Les hooks ont acces a <code>$TOOL_NAME</code>, <code>$TOOL_INPUT</code>, <code>$TOOL_OUTPUT</code>, et <code>$CLAUDE_PLUGIN_ROOT</code>.
                            </p>
                            <p data-lang="en">
                                Hooks have access to <code>$TOOL_NAME</code>, <code>$TOOL_INPUT</code>, <code>$TOOL_OUTPUT</code>, and <code>$CLAUDE_PLUGIN_ROOT</code>.
                            </p>
                        </div>
                    </div>
                </section>
            </div>
            </main>
        </div>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn">&#9776;</button>
    <div class="overlay"></div>

    <script src="js/app.js"></script>
</body>
</html>
