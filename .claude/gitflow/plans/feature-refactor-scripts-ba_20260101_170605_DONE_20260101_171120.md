# Plan d'Intégration GitFlow

**Généré le**: 2026-01-01 17:06:05
**Branche source**: feature/refactor-scripts-ba
**Branche cible**: develop
**Stratégie**: Rebase + Merge --no-ff

---

## Résumé

| Propriété | Valeur |
|-----------|--------|
| **Source** | feature/refactor-scripts-ba |
| **Cible** | develop |
| **Commits** | 5 commits |
| **Fichiers modifiés** | 119 files |
| **Insertions** | +12537 |
| **Suppressions** | -1179 |
| **Version actuelle** | 1.2.0 |
| **Prochaine version** | 1.3.0 (minor) |
| **Type** | feature → minor bump |
| **Tag** | v1.3.0 |

---

## Commits à intégrer

```
f84ff2b feat(business-analyse): add phase 7-dev with implementation phasing
d70d2be chore(gitflow): sync commands and add agents
84279e3 feat(gitflow): add auto-push after commit with worktree detection
dcee9d1 merge: sync with origin/develop (documentation + refactoring)
0d800bf feat(business-analyse): refonte complète du workflow BA
```

---

## Changements principaux

### Nouveaux fichiers (highlights)

**Business Analyse - Workflow complet 7 phases:**
- `.claude/commands/business-analyse.md` (136 lignes)
- `.claude/commands/business-analyse/1-init.md` (264 lignes)
- `.claude/commands/business-analyse/2-discover.md` (364 lignes)
- `.claude/commands/business-analyse/3-analyse.md` (410 lignes)
- `.claude/commands/business-analyse/4-specify.md` (673 lignes)
- `.claude/commands/business-analyse/5-document.md` (350 lignes)
- `.claude/commands/business-analyse/6-handoff.md` (483 lignes)
- `.claude/commands/business-analyse/7-dev.md` (391 lignes) ✨ **NOUVEAU**
- `.claude/commands/business-analyse/bug.md` (310 lignes)

**EF Core - Commands et agents:**
- `.claude/commands/efcore.md` + 5 sous-commandes (db-deploy, db-reset, db-seed, db-status, migration)
- `.claude/agents/efcore/*.md` (5 agents)

**GitFlow - Commands et agents:**
- `.claude/commands/gitflow/10-start.md` (106 lignes)
- `.claude/commands/gitflow/11-finish.md`
- `.claude/commands/gitflow/3-commit.md` (49 lignes) - auto-push worktree
- `.claude/agents/gitflow/*.md` (6 agents)

**Documentation:**
- `.documentation/business-analyse.html` (1176 lignes) - remplace ba.html
- Mise à jour de toutes les pages HTML (index, gitflow, etc.)

### Fichiers déplacés vers _deprecated

- `.claude/agents/ba/*` → `.claude/agents/_deprecated/ba-old/*`
- `.claude/commands/ba/*` → `.claude/commands/_deprecated/ba-old/*`
- `templates/` (même structure)

### Fichiers supprimés

- `docs/LOCAL-DEV-GUIDE.md` (336 lignes)
- `docs/RAPPORT-APEX-BA-COMPARISON.md` (174 lignes)
- `.documentation/ba.html` (643 lignes) - remplacé par business-analyse.html
- `.claude/commands/business-analyse/MIGRATION-NOTES.md`

### Fichiers modifiés

- `README.md` - Mise à jour Business Analyse (6→7 phases)
- `.claude/gitflow/config.json` - Auto-push worktree
- `.documentation/*.html` - Navigation et liens
- `templates/` - Synchronisation avec `.claude/`

---

## EF Core Migrations

**Aucune migration détectée** - Ce projet Node.js/TypeScript n'utilise pas Entity Framework Core.

---

## Pré-requis

### Vérifications automatiques

- [ ] Pas de conflits avec develop
- [ ] Tests unitaires passent
- [ ] Linting passe
- [ ] Build réussit
- [ ] Aucune migration EF Core (N/A)

### Vérifications manuelles

- [x] Code review effectuée
- [x] Documentation à jour
- [x] CHANGELOG.md mis à jour (si applicable)
- [x] Breaking changes documentés (aucun)

---

## Stratégie d'exécution

### 1. Préparation

```bash
# Vérifier l'état actuel
git status
git fetch origin

# S'assurer d'être sur develop
git checkout develop
git pull origin develop

# Retourner sur la feature
git checkout feature/refactor-scripts-ba
```

### 2. Rebase sur develop

```bash
# Rebaser la branche feature sur develop
git rebase develop

# En cas de conflits:
# 1. Résoudre les conflits
# 2. git add <fichiers>
# 3. git rebase --continue
```

### 3. Merge --no-ff

```bash
# Retourner sur develop
git checkout develop

# Merger avec --no-ff (préserve l'historique)
git merge --no-ff feature/refactor-scripts-ba -m "feat(business-analyse): integrate phase 7-dev and refactor BA workflow"
```

### 4. Versioning et Tag

```bash
# Mettre à jour package.json
npm version minor -m "chore: bump version to %s"
# Ceci créera automatiquement le tag v1.3.0

# OU manuellement:
# 1. Modifier package.json: "version": "1.3.0"
# 2. git add package.json
# 3. git commit -m "chore: bump version to 1.3.0"
# 4. git tag -a v1.3.0 -m "Release v1.3.0"
```

### 5. Push

```bash
# Push develop
git push origin develop

# Push le tag
git push origin v1.3.0
```

### 6. Nettoyage (optionnel)

```bash
# Supprimer la branche locale
git branch -d feature/refactor-scripts-ba

# Supprimer la branche remote (si existe)
git push origin --delete feature/refactor-scripts-ba
```

---

## Rollback en cas de problème

### Si problème détecté AVANT le push

```bash
# Annuler le merge (revenir à l'état avant merge)
git reset --hard HEAD~1

# Ou si tag créé:
git tag -d v1.3.0
git reset --hard HEAD~2
```

### Si problème détecté APRÈS le push

```bash
# Créer un hotfix pour corriger
git checkout -b hotfix/fix-integration-issue develop
# ... faire les corrections ...
git checkout develop
git merge --no-ff hotfix/fix-integration-issue
git push origin develop

# OU en dernier recours (DANGEREUX):
# git revert <commit-hash>
```

---

## Checkpoints

### ✅ Checkpoint 1: Rebase réussi
- [ ] Aucun conflit OU conflits résolus
- [ ] `git log --oneline` montre un historique propre
- [ ] Tests passent après rebase

### ✅ Checkpoint 2: Merge réussi
- [ ] Merge --no-ff effectué
- [ ] Historique préservé (pas de fast-forward)
- [ ] develop contient tous les commits

### ✅ Checkpoint 3: Version et tag
- [ ] package.json à 1.3.0
- [ ] Tag v1.3.0 créé
- [ ] Tag pointe sur le bon commit

### ✅ Checkpoint 4: Push réussi
- [ ] develop pushé sur origin
- [ ] Tag v1.3.0 pushé
- [ ] CI/CD déclenché (si applicable)

---

## Notes

### Breaking Changes
Aucun breaking change. Migration progressive:
- Ancien workflow `ba` déplacé vers `_deprecated/ba-old/`
- Nouveau workflow `business-analyse` avec 7 phases
- Commandes GitFlow améliorées (auto-push worktree)

### Impacts
- **Développeurs**: Nouveau workflow BA avec phase 7-dev
- **CI/CD**: Aucun impact
- **Documentation**: business-analyse.html remplace ba.html

### Références
- Feature branch: feature/refactor-scripts-ba
- Base commit develop: (avant rebase)
- Version précédente: v1.2.0
- Version cible: v1.3.0

---

**Prochaine étape**: Exécuter `/gitflow:5-exec` pour lancer l'intégration automatique.
